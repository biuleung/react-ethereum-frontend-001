{"version":3,"sources":["views/dances/videos/horizontal-video.module.scss","reusable/auth/auth.module.css","reusable/auth/metamask-auth.module.css","views/dances/dances.tsx","reusable/base/dropdown-select.tsx","reusable/calculate.tsx","views/dances/videos/video-item.tsx","views/dances/videos/horizontal-videos.tsx","views/dances/videos/videos-block.tsx","views/dances/videos/videos.tsx","routes.js","containers/TheContent.js","containers/TheFooter.js","containers/TheHeader.js","contracts-info/register.tsx","reusable/auth/registration-check.tsx","reusable/auth/metamask-auth.tsx","reusable/auth/auth.tsx","containers/TheHeaderDropdown.js","containers/_nav.js","containers/TheSidebar.js","containers/TheLayout.js"],"names":["module","exports","Dances","to","DropdownSelect","itemList","onSelect","onRemove","placeholder","enabledPreviousSelected","options","selectRef","useRef","forEach","t","i","push","state","useEffect","current","selectedValues","setTimeout","$","prop","ref","closeOnSelect","e","groupBy","displayValue","Calculate","array","randomizedArray","length","j","Math","floor","random","error","setProgress","progressSlice","actions","VideoItem","type","videoUrl","videoHeight","videoWidth","dispatch","useDispatch","videoObserver","IntersectionObserver","entries","isIntersecting","setShowVideo","disconnect","rootMargin","threshold","useState","showVideo","container","createRef","window","observe","className","width","height","onLoad","src","title","frameBorder","allow","allowFullScreen","undefined","HorizontalVideos","styles","videoScroller","map","video","url","v4","VideosBlock","selectedVideos","useSelector","allVideosInfo","AllVideosSlice","setSelectedVideos","setTags","Videos","videoList","setVideoList","allTags","shuffledVideoList","numOfSelectedVideos","action","fetchAllVideos","loadVideos","store","result","Array","isArray","payload","data","step","fullCount","v","hasOwnProperty","tags","find","ts","key","shuffle","allTagsMemo","useMemo","onSelectionChange","event","filter","every","some","routes","path","exact","name","component","React","lazy","loading","TheContent","fluid","fallback","route","idx","render","props","from","memo","TheFooter","fixed","href","target","rel","TheHeader","siderbarShowSlice","toggle","toggleMobile","currentPercentage","progressBar","calPercentage","withSubheader","inHeader","onClick","ProgressBar","animated","now","hidden","REGISTER_ADDRESS","REGISTER_ABI","setProvider","ERCProviderSlice","updateAddress","loginInfoSlice","getProvider","ethers","providers","Web3Provider","ethereum","RegistrationCheck","addr","provider","contract","Contract","Register","getRegisteredAccount","isRegistered","address","isMobileDevice","checkConnectionToMetaMask","alert","request","method","accounts","setUpEthereumEvent","account","signer","getSigner","txContract","value","gasLimit","signup","message","accountWasChanged","clearAccount","on","bind","ConnectToMetaMaskBtn","setUserAddress","button","Address","userAddress","id","substring","MetaMaskAuth","loginInfo","ERCProvider","checkIfWalletIsConnected","Auth","auth","logoContainer","TheHeaderDropdown","inNav","direction","caret","process","alt","placement","header","tag","color","divider","_nav","_tag","icon","customClasses","badge","text","_children","TheSidebar","show","sidebarShow","onShowChange","items","navigation","components","CSidebarNavDivider","CSidebarNavDropdown","CSidebarNavItem","CSidebarNavTitle","TheLayout"],"mappings":"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","file":"static/js/5.a6c4fee4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"horizontal-video_container__2ptRL\",\"videoScroller\":\"horizontal-video_videoScroller__3dAdE\",\"scrollingButtons\":\"horizontal-video_scrollingButtons__3tdRv\",\"button\":\"horizontal-video_button__3hp3Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"auth_auth__YftEO\",\"logoContainer\":\"auth_logoContainer__X9iHt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"metamask-auth_button__150ih\",\"address\":\"metamask-auth_address__3JgnA\"};","import { Redirect } from 'react-router-dom'\n\nconst Dances = () => {\n  return <Redirect to={'/dances/videos'} />\n}\n\nexport default Dances","import React, { useEffect, useRef } from 'react'\nimport Multiselect from 'multiselect-react-dropdown';\nimport $ from 'jquery';\n\ntype Props = {\n    itemList: any[],\n    onSelect: any,\n    onRemove: any,\n    placeholder: string,\n    enabledPreviousSelected: boolean\n}\n\nexport const DropdownSelect: React.FunctionComponent<Props> = ({ itemList, onSelect, onRemove, placeholder = 'Select', enabledPreviousSelected = false }) => {\n    const options: any[] = [];\n    const selectRef = useRef<any>();\n    itemList.forEach((t, i) => {\n        options.push(t)\n    });\n\n    const state = {\n        options,\n    };\n\n    useEffect(() => {\n        if (enabledPreviousSelected) {\n            onSelect(selectRef.current.state.selectedValues)\n        }\n    })\n\n    setTimeout(() => {\n        $('#search_input').prop('readonly', true);   \n    });\n\n    return (\n        <Multiselect\n            ref={selectRef}\n            placeholder={placeholder}\n            options={state.options}\n            closeOnSelect={false}\n            onSelect={(e) => onSelect(e)}\n            onRemove={(e) => onRemove(e)}\n            groupBy=\"cat\"\n            displayValue=\"key\"\n        />\n    )\n}\n","export class Calculate {\n\n    static shuffle(array: any[]) {\n        const randomizedArray = [...array];\n        try {\n            for (let i = randomizedArray.length - 1; i > 0; i--) {\n                let j = Math.floor(Math.random() * (i + 1));\n                [randomizedArray[i], randomizedArray[j]] = [randomizedArray[j], randomizedArray[i]];\n            }\n            return randomizedArray;\n        } catch (error) {\n            return array;\n        }\n    }\n}\n","import { useDispatch } from \"react-redux\";\nimport  { createRef, FC, useEffect, useState } from 'react';\nimport { progressSlice } from \"../../../redux/store\";\n\nconst { setProgress } = progressSlice.actions;\n\ntype Props = {\n    type?: string;\n    videoUrl?: string;\n    videoHeight: string;\n    videoWidth: string;\n}\n\nconst VideoItem: React.FunctionComponent<Props> = ({ type = '', videoUrl = '', videoHeight, videoWidth }) => {\n    const dispatch = useDispatch();\n    function Loaded() {\n        dispatch(setProgress({}));\n    }\n\n    // https://dev.to/daviddalbusco/lazy-load-youtube-video-iframe-2hf9\n    const videoObserver = new IntersectionObserver(\n        onVideoIntersection, {\n      rootMargin: '100px 0px',\n      threshold: 0.25\n    });\n\n    const [showVideo, setShowVideo] = useState(false);\n    const container = createRef<HTMLDivElement>();\n\n    useEffect(() => {\n        if (window && 'IntersectionObserver' in window) {\n            if (container && container.current) {\n                videoObserver.observe(container.current);\n            }\n        } else {\n            setShowVideo(true);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [container]);\n\n    function onVideoIntersection(entries: any) {\n        if (!entries || entries.length <= 0) {\n            return;\n        }\n\n        if (entries[0].isIntersecting) {\n            setShowVideo(true);\n            videoObserver.disconnect();\n        }\n    }\n\n    videoUrl = videoUrl + '?rel=0&modestbranding=1&autohide=1&showinfo=0';\n    const className = `videos-box ${type}`\n    return (\n        <>\n            <div className={className} ref={container as React.RefObject<HTMLDivElement>}>\n                {showVideo ? \n                <iframe\n                    width={videoWidth}\n                    height={videoHeight}\n                    onLoad={Loaded}\n                    src={videoUrl}\n                    title=\"YouTube video player\" frameBorder=\"0\"\n                    allow=\"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                    allowFullScreen>\n                </iframe>: undefined\n                }\n            </div>\n        </>\n    )\n}\n\nexport default VideoItem;\n","import VideoItem from './video-item';\nimport styles from './horizontal-video.module.scss';\nimport { v4 } from 'uuid';\nimport { useRef } from 'react';\nimport { Video } from 'src/redux/slices/all-videos-slice';\n// import $ from 'jquery';\n// import { Button } from \"react-bootstrap\";\n// import { KeyboardArrowLeft, KeyboardArrowRight } from \"@mui/icons-material\";\n\ntype Props = {\n    itemList: Video[];\n};\n\nexport const HorizontalVideos: React.FunctionComponent<Props> = ({\n    itemList,\n}) => {\n    const ref = useRef<any>(null);\n    //     const [isLeftScrollingBtnDisabled, setLeftScrollingBtnDisabled] = useState(false);\n    //     const [isRightScrollingBtnDisabled, setRightScrollingBtnDisabled] = useState(false);\n\n    //     useEffect(() => {\n    //         modifyScrollingBtnsState();\n    // }, []);\n\n    // window.addEventListener('resize', () => {\n    //     $(`.${styles.rightButton}`).css({top: $('.horizontal-video')[0].offsetTop + 'px'});\n    //     $(`.${styles.rightButton}`).height($('.horizontal-video')[0].offsetHeight * 0.99 + 'px');\n    //    });\n\n    // const scroll = (direction: string) => {\n    //     if(direction === 'left'){\n    //         const scrollOffset = $('.horizontal-video')[0].offsetWidth * 3.5;\n    //         if(ref && ref.current) {\n    //             ref.current.scrollLeft -= scrollOffset;\n    //                     modifyScrollingBtnsState();\n    //         }\n    //     }else{\n    //         const scrollOffset = $('.horizontal-video')[0].offsetWidth * 3.5;\n    //         if(ref && ref.current) {\n    //             ref.current.scrollLeft += scrollOffset;\n    //                     modifyScrollingBtnsState();\n\n    //         }\n    //     }\n    // }\n\n    // const modifyScrollingBtnsState = () => {\n    //         if(ref && ref.current) {\n    //             if(ref.current.scrollLeft <= 0) {\n    //                 setLeftScrollingBtnDisabled(true);\n    //                 setRightScrollingBtnDisabled(false);\n    //             }else if(ref.current.scrollLeft >= ref.current.clientWidth) {\n    //                 setLeftScrollingBtnDisabled(false);\n    //                 setRightScrollingBtnDisabled(true);\n    //             }else {\n    //                 setLeftScrollingBtnDisabled(false);\n    //                 setRightScrollingBtnDisabled(false);\n    //             }\n    //             console.log(ref.current.scrollLeft);\n    //         }\n    // }\n\n    return (\n        <>\n            <div className={styles.container + ' horizontal-videos'}>\n                {/* <div className={styles.scrollingButtons}>\n                <Button disabled={isLeftScrollingBtnDisabled} variant=\"dark\" className={styles.button} onClick={() => scroll('left')}>\n                    <KeyboardArrowLeft />\n                    </Button>\n                <Button disabled={isRightScrollingBtnDisabled} variant=\"dark\" className={styles.button} onClick={() => scroll('right')}>\n                    <KeyboardArrowRight />\n                    </Button>\n            </div> */}\n                <div className={styles.videoScroller} ref={ref}>\n                    {itemList &&\n                        itemList.map((video: Video) => (\n                            <VideoItem\n                                type=\"horizontal-video\"\n                                key={v4()}\n                                videoUrl={video.url}\n                                videoHeight=\"100%\"\n                                videoWidth=\"100%\"\n                            />\n                        ))}\n                </div>\n            </div>\n        </>\n    );\n};\n","import { RootStateOrAny, useSelector } from 'react-redux';\nimport { Video } from 'src/redux/slices/all-videos-slice';\nimport VideoItem from './video-item';\nimport { v4 } from 'uuid';\n\nconst VideosBlock = () => {\n    const selectedVideos = useSelector(\n        (state: RootStateOrAny) => state.allVideosInfo.selectedVideos\n    );\n\n    return (\n        <div className=\"all-vedeos-box-container\">\n            <div className=\"vedeos-grid\">\n                {selectedVideos &&\n                    selectedVideos.map((video: Video) => (\n                        <VideoItem\n                            type=\"all-video\"\n                            key={v4()}\n                            videoUrl={video.url}\n                            videoHeight=\"250px\"\n                            videoWidth=\"335px\"\n                        />\n                    ))}\n            </div>\n        </div>\n    );\n};\n\nexport default VideosBlock;\n","/* eslint-disable array-callback-return */\nimport { useEffect, useMemo, useState } from 'react';\nimport './videos.scss';\nimport { progressSlice } from 'src/redux/store';\nimport { useDispatch } from 'react-redux';\nimport { DropdownSelect } from 'src/reusable/base/dropdown-select';\nimport { Calculate } from '../../../reusable/calculate';\nimport { HorizontalVideos } from './horizontal-videos';\n\nimport {\n    AllVideosSlice,\n    fetchAllVideos,\n    Tag,\n    Video,\n} from 'src/redux/slices/all-videos-slice';\nimport store from 'src/redux/store';\nimport VideosBlock from './videos-block';\n\nconst { setSelectedVideos, setTags } = AllVideosSlice.actions;\nconst { setProgress } = progressSlice.actions;\n\nconst Videos = () => {\n    const dispatch = useDispatch();\n    const [videoList, setVideoList] = useState<Video[]>([]);\n\n    let allTags: Tag[] = [];\n    let shuffledVideoList: Video[] = [];\n    let selectedVideos: Video[] = [];\n    const numOfSelectedVideos = selectedVideos && selectedVideos.length;\n\n    useEffect(() => {\n        const action = fetchAllVideos();\n\n        const loadVideos = async () => {\n            const result = await store.dispatch(action);\n            setVideoList(\n                Array.isArray(result.payload) && result.payload[0].data\n            );\n        };\n\n        loadVideos();\n        return () => {\n            dispatch(setSelectedVideos([]));\n            dispatch(setProgress({ step: 0, fullCount: 0 }));\n        };\n    }, [dispatch]);\n\n    if (Array.isArray(videoList) && videoList.length) {\n        videoList.forEach((v) => {\n            v.hasOwnProperty('tags') &&\n                v.tags.forEach((t: any) => {\n                    if (allTags && !allTags.find((ts) => ts.key === t.key)) {\n                        allTags.push(t);\n                    }\n                });\n        });\n        shuffledVideoList = [...Calculate.shuffle(videoList)];\n    }\n\n    const allTagsMemo = useMemo(() => {\n        dispatch(setTags(allTags));\n        return allTags;\n    }, [allTags, dispatch]);\n\n    useEffect(() => {\n        if (numOfSelectedVideos) {\n            dispatch(setProgress({ fullCount: numOfSelectedVideos }));\n        }\n    }, [dispatch, numOfSelectedVideos]);\n\n    const onSelectionChange = (event: { key: string; id: number }[]) => {\n        dispatch(setProgress({ step: 0, fullCount: 0 }));\n        selectedVideos =\n            videoList &&\n            videoList.filter((v) =>\n                event.every((e) => v.tags.some((t) => t.key === e.key))\n            );\n\n        dispatch(setSelectedVideos(selectedVideos));\n        dispatch(setProgress({ fullCount: selectedVideos.length }));\n    };\n\n    return (\n        <>\n            <HorizontalVideos itemList={shuffledVideoList} />\n            <div className=\"mt-5\">\n                <div>\n                    <h2>All videos</h2>\n                </div>\n                <div className=\"dropdown-list\">\n                    <DropdownSelect\n                        itemList={allTagsMemo}\n                        onSelect={onSelectionChange}\n                        onRemove={onSelectionChange}\n                        placeholder=\"Filter\"\n                        enabledPreviousSelected={true}\n                    />\n                </div>\n                <div>{videoList && videoList.length && <VideosBlock />}</div>\n            </div>\n        </>\n    );\n};\n\nexport default Videos;\n","import React from 'react';\nimport Dances from './views/dances/dances';\nimport Videos from './views/dances/videos/videos';\n\nconst Dashboard = React.lazy(() => import('./views/dashboard/Dashboard'));\nconst Users = React.lazy(() => import('./views/users/Users'));\n\nconst routes = [\n  { path: '/', exact: true, name: 'Home' },\n  { path: '/dashboard', name: 'Dashboard', component: Dashboard },\n  { path: '/dances', name: 'Dances', component: Dances, exact: true },\n  { path: '/dances/videos', name: 'Videos', component: Videos },\n  { path: '/users', exact: true, name: 'Users', component: Users },\n];\n\nexport default routes;\n","import React, { Suspense } from 'react'\nimport {\n  Redirect,\n  Route,\n  Switch\n} from 'react-router-dom'\nimport { CContainer, CFade } from '@coreui/react'\n\n// routes config\nimport routes from '../routes'\n  \nconst loading = (\n  <div className=\"pt-3 text-center\">\n    <div className=\"sk-spinner sk-spinner-pulse\"></div>\n  </div>\n)\n\nconst TheContent = () => {\n  return (\n    <main className=\"c-main\">\n      <CContainer fluid>\n        <Suspense fallback={loading}>\n          <Switch>\n            {routes.map((route, idx) => {\n              return route.component && (\n                <Route\n                  key={idx}\n                  path={route.path}\n                  exact={route.exact}\n                  name={route.name}\n                  render={props => (\n                    <CFade>\n                      <route.component {...props} />\n                    </CFade>\n                  )} />\n              )\n            })}\n            <Redirect from=\"/\" to=\"/dashboard\" />\n          </Switch>\n        </Suspense>\n      </CContainer>\n    </main>\n  )\n}\n\nexport default React.memo(TheContent)\n","import React from 'react'\nimport { CFooter } from '@coreui/react'\n\nconst TheFooter = () => {\n  return (\n    <CFooter fixed={false}>\n      <div>\n      </div>\n      <div className=\"mfs-auto\">\n        <a href=\"\" target=\"_blank\" rel=\"noopener noreferrer\">2022</a>\n      </div>\n    </CFooter>\n  )\n}\n\nexport default React.memo(TheFooter)\n","import React from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  CHeader,\n  CToggler,\n  CHeaderBrand,\n  CHeaderNav,\n  CHeaderNavItem,\n  CHeaderNavLink,\n  CSubheader,\n  CBreadcrumbRouter,\n} from '@coreui/react'\nimport ProgressBar from 'react-bootstrap/ProgressBar'\n\n// routes config\nimport routes from '../routes'\n\nimport {\n  TheHeaderDropdown,\n} from './index'\nimport { siderbarShowSlice } from 'src/redux/store'\n\nconst TheHeader = () => {\n  const dispatch = useDispatch();\n\n  const { toggle, toggleMobile } = siderbarShowSlice.actions;\n  const progressBar = useSelector(state => state.progressBar);\n\n  let currentPercentage = calPercentage(progressBar);\n\n  function calPercentage(progressBar) {\n    let currentPercentage = progressBar.step / progressBar.fullCount * 100;\n\n    return (currentPercentage < 10 && progressBar.fullCount > 0) ?? currentPercentage\n      ? 10\n      : currentPercentage;\n  }\n\n  function toggleSidebar() {\n    dispatch(toggle());\n  }\n\n  function toggleSidebarMobile() {\n    dispatch(toggleMobile());\n  }\n\n  return (\n    <>\n      <CHeader withSubheader>\n        <CToggler\n          inHeader\n          className=\"ml-md-3 d-lg-none\"\n          onClick={toggleSidebarMobile}\n        />\n        <CToggler\n          inHeader\n          className=\"ml-3 d-md-down-none\"\n          onClick={toggleSidebar}\n        />\n        <CHeaderBrand className=\"mx-auto d-lg-none\" to=\"/\">\n          Homepage\n        </CHeaderBrand>\n\n        <CHeaderNav className=\"d-md-down-none mr-auto\">\n          <CHeaderNavItem className=\"px-3\" >\n            <CHeaderNavLink to=\"/dashboard\">Dashboard</CHeaderNavLink>\n          </CHeaderNavItem>\n          <CHeaderNavItem className=\"px-3\">\n            <CHeaderNavLink to=\"/users\">Users</CHeaderNavLink>\n          </CHeaderNavItem>\n          <CHeaderNavItem className=\"px-3\">\n            <CHeaderNavLink>Settings</CHeaderNavLink>\n          </CHeaderNavItem>\n        </CHeaderNav>\n\n        <CHeaderNav className=\"px-3\">\n          <TheHeaderDropdown></TheHeaderDropdown>\n        </CHeaderNav>\n\n        <CSubheader className=\"px-3 justify-content-between\">\n          <CBreadcrumbRouter\n            className=\"border-0 c-subheader-nav m-0 px-0 px-md-3\"\n            routes={routes}\n          />\n          <div className=\"d-md-down-none mfe-2 c-subheader-nav\">\n          </div>\n        </CSubheader>\n      </CHeader>\n      <div className='progress-bar-container'>\n        <ProgressBar\n          animated\n          now={currentPercentage}\n          hidden={currentPercentage >= 100 || !currentPercentage} />\n      </div>\n    </>\n  )\n}\n\nexport default TheHeader\n","export const REGISTER_ADDRESS = '0x59F6FaB187BD88311cF4335d0d99bA126B150df0';\n\nexport const REGISTER_ABI = [\n    {\n        \"inputs\": [\n            {\n                \"internalType\": \"uint256\",\n                \"name\": \"initRegistrationFee\",\n                \"type\": \"uint256\"\n            }\n        ],\n        \"stateMutability\": \"nonpayable\",\n        \"type\": \"constructor\"\n    },\n    {\n        \"anonymous\": false,\n        \"inputs\": [\n            {\n                \"indexed\": true,\n                \"internalType\": \"address\",\n                \"name\": \"previousOwner\",\n                \"type\": \"address\"\n            },\n            {\n                \"indexed\": true,\n                \"internalType\": \"address\",\n                \"name\": \"newOwner\",\n                \"type\": \"address\"\n            }\n        ],\n        \"name\": \"OwnershipTransferred\",\n        \"type\": \"event\"\n    },\n    {\n        \"anonymous\": false,\n        \"inputs\": [\n            {\n                \"indexed\": false,\n                \"internalType\": \"address\",\n                \"name\": \"deactivatedAccountAddr\",\n                \"type\": \"address\"\n            }\n        ],\n        \"name\": \"accountDeactivatd\",\n        \"type\": \"event\"\n    },\n    {\n        \"inputs\": [\n            {\n                \"internalType\": \"address\",\n                \"name\": \"addr\",\n                \"type\": \"address\"\n            }\n        ],\n        \"name\": \"deactivateAccount\",\n        \"outputs\": [],\n        \"stateMutability\": \"nonpayable\",\n        \"type\": \"function\"\n    },\n    {\n        \"anonymous\": false,\n        \"inputs\": [\n            {\n                \"indexed\": false,\n                \"internalType\": \"address\",\n                \"name\": \"registeredaccount\",\n                \"type\": \"address\"\n            }\n        ],\n        \"name\": \"newRegistered\",\n        \"type\": \"event\"\n    },\n    {\n        \"inputs\": [],\n        \"name\": \"signup\",\n        \"outputs\": [],\n        \"stateMutability\": \"payable\",\n        \"type\": \"function\"\n    },\n    {\n        \"inputs\": [\n            {\n                \"internalType\": \"address\",\n                \"name\": \"newOwner\",\n                \"type\": \"address\"\n            }\n        ],\n        \"name\": \"transferOwnership\",\n        \"outputs\": [],\n        \"stateMutability\": \"nonpayable\",\n        \"type\": \"function\"\n    },\n    {\n        \"inputs\": [\n            {\n                \"internalType\": \"address\",\n                \"name\": \"addr\",\n                \"type\": \"address\"\n            }\n        ],\n        \"name\": \"getRegisteredAccount\",\n        \"outputs\": [\n            {\n                \"internalType\": \"address\",\n                \"name\": \"\",\n                \"type\": \"address\"\n            },\n            {\n                \"internalType\": \"bool\",\n                \"name\": \"\",\n                \"type\": \"bool\"\n            }\n        ],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n    }\n]\n","import { ethers } from \"ethers\"\nimport { Dispatch } from \"redux\";\nimport { ERCProviderSlice, loginInfoSlice } from \"src/redux/store\";\nimport * as Register from '../../contracts-info/register'\n\nconst { setProvider } = ERCProviderSlice.actions;\nconst { updateAddress } = loginInfoSlice.actions;\n\nasync function getProvider() {\n    // return ethers.getDefaultProvider('rinkeby');\n    return new ethers.providers.Web3Provider(window.ethereum);\n}\n\nconst RegistrationCheck = async (dispatch: Dispatch, addr: string) => {\n    try {\n        const provider = await getProvider();\n        if (provider) {\n            dispatch(setProvider(provider));\n        }\n        const contract = new ethers.Contract(Register.REGISTER_ADDRESS, Register.REGISTER_ABI, provider);\n        const isRegistered = await contract.getRegisteredAccount(addr);\n        if (isRegistered && isRegistered[1]) {\n            dispatch(updateAddress({ address: addr, isRegistered: true }))\n            return true\n        } else {\n            dispatch(updateAddress({ address: addr, isRegistered: false }))\n            return false\n        }\n    } catch (error) {\n        return false;\n    }\n}\n\nexport default RegistrationCheck\n","import React, { useEffect } from \"react\";\nimport { RootStateOrAny, useDispatch, useSelector } from \"react-redux\";\nimport { loginInfoSlice } from \"src/redux/store\";\nimport styles from \"./metamask-auth.module.css\";\nimport RegistrationCheck from \"./registration-check\";\nimport { ethers } from \"ethers\"\nimport * as Register from '../../contracts-info/register'\nimport { Dispatch } from \"redux\";\n\nconst { updateAddress } = loginInfoSlice.actions;\n\nfunction isMobileDevice() {\n    return 'ontouchstart' in window || 'onmsgesturechange' in window;\n}\n\nasync function checkConnectionToMetaMask(dispatch: Dispatch) {\n    if (!window.ethereum) {\n        alert(\"Get MetaMask!\");\n        dispatch(updateAddress({ address: '0x' }));\n        return;\n    }\n\n    const accounts = await window.ethereum.request({\n        method: \"eth_requestAccounts\",\n    });\n\n    await RegistrationCheck(dispatch, accounts[0])\n}\n\nasync function checkIfWalletIsConnected(dispatch: Dispatch) {\n    if (window.ethereum) {\n        setUpEthereumEvent(dispatch);\n        const accounts = await window.ethereum.request({\n            method: \"eth_accounts\",\n        });\n\n        if (accounts.length > 0) {\n            await RegistrationCheck(dispatch, accounts[0])\n            setUpEthereumEvent(dispatch);\n            return;\n        }\n        else {\n            dispatch(updateAddress({ address: '0x' }))\n        }\n\n        if (isMobileDevice()) {\n            await checkConnectionToMetaMask(dispatch);\n        }\n    }\n}\n\nasync function signup(dispatch: Dispatch, provider: any, account: string) {\n\n    if (await RegistrationCheck(dispatch, account)) {\n        dispatch(updateAddress({ address: account, isRegistered: true }));\n    } else {\n        const signer = provider.getSigner();\n        const txContract = new ethers.Contract(Register.REGISTER_ADDRESS, Register.REGISTER_ABI, signer);\n        const options = {\n            value: 20,\n            gasLimit: 300000\n        }\n        let signupResult;\n        try {\n            signupResult = await txContract.signup(options);\n            // TODO show success toast\n        } catch (error: any) {\n            // TODO show warning toast\n            alert(error.message);\n        } finally {\n            await RegistrationCheck(dispatch, account);\n        }\n    }\n}\n\nconst accountWasChanged = async (dispatch: Dispatch, accounts: string[]) => {\n    if (accounts.length > 0) {\n        await RegistrationCheck(dispatch, accounts[0])\n    }\n    else {\n        dispatch(updateAddress({ address: '0x' }))\n    }\n}\n\nconst clearAccount = (dispatch: Dispatch) => {\n    dispatch(updateAddress({ address: '0x' }))\n};\n\nfunction setUpEthereumEvent(dispatch: Dispatch) {\n    if (window.ethereum) {\n        window.ethereum.on('accountsChanged', accountWasChanged.bind(null, dispatch));\n        window.ethereum.on('disconnect', clearAccount.bind(null, dispatch));\n    }\n}\n\nfunction removeEthereumEvent() {\n    if (window.ethereum) {\n        // window.ethereum.removeListener('accountsChanged', handleAccountsChanged)\n        // window.ethereum.removeListener('disconnect', handleDisconnect);\n    }\n}\n\ntype ConnectToMetaMaskBtnProps = {\n    setUserAddress: Dispatch\n}\n\nconst ConnectToMetaMaskBtn: React.FunctionComponent<ConnectToMetaMaskBtnProps> = ({setUserAddress} ) => {\n    if (isMobileDevice()) {\n        const dappUrl = \"metamask-auth.ilamanov.repl.co\";\n        const metamaskAppDeepLink = \"https://metamask.app.link/dapp/\" + dappUrl;\n        return (\n            <a href={metamaskAppDeepLink}>\n                <button className={styles.button}>\n                    Connect to MetaMask\n                </button>\n            </a>\n        );\n    }\n\n    return (\n        <button className={styles.button} onClick={() => checkConnectionToMetaMask(setUserAddress)}>\n            Connect to MetaMask\n        </button>\n    );\n}\n\ntype AddressProps = {\n    userAddress: string\n}\n\nconst Address: React.FunctionComponent<AddressProps> = ( {userAddress}) => {\n    return (\n        <span id='short-address' className={styles.address}>{userAddress.substring(0, 5)}â€¦{userAddress.substring(userAddress.length - 4)}</span>\n    );\n}\n\nconst MetaMaskAuth = () => {\n    const dispatch = useDispatch();\n    const loginInfo = useSelector((state: RootStateOrAny) => state.loginInfo);\n    const ERCProvider = useSelector((state: RootStateOrAny) => state.ERCProvider);\n\n    useEffect(() => {\n        checkIfWalletIsConnected(dispatch);\n        return () => {\n            removeEthereumEvent();\n        }\n    }, [dispatch]);\n\n    switch (loginInfo.address && loginInfo.address !== '0x') {\n        case true:\n            if (loginInfo.isRegistered === true) {\n                return (\n                <>\n                    <div className=\"mr-1\">\n                        <Address userAddress={loginInfo.address} />\n                    </div>\n                </>\n                )\n            } else {\n                return (\n                <>\n                    <button\n                        className={styles.button}\n                        onClick={() => signup(dispatch, ERCProvider.provider, loginInfo.address)}>\n                        Sign up\n                    </button>\n                </>\n                    )\n            }\n        case false:\n            return (\n                <>\n                <ConnectToMetaMaskBtn setUserAddress={dispatch} />\n                </>\n            )\n        default:\n            return (\n                <></>\n            )\n    }\n}\n\nexport default MetaMaskAuth;\n","import styles from './auth.module.css';\nimport MetaMaskAuth from './metamask-auth';\n\nfunction Auth() {\n    return (\n        <div className={styles.auth}>\n            <div className={styles.logoContainer}>\n                {/* <img src={\"svg/metamask.svg\"} alt='' height={30} /> */}\n            </div>\n            <MetaMaskAuth />\n        </div>\n    );\n}\n\nexport default Auth;","import React from 'react'\nimport {\n  CDropdown,\n  CDropdownItem,\n  CDropdownMenu,\n  CDropdownToggle,\n  CImg\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport { useSelector } from 'react-redux'\nimport Auth from 'src/reusable/auth/auth'\n\nconst TheHeaderDropdown = () => {\n  const loginInfo = useSelector(state => state.loginInfo);\n\n  return (\n    <CDropdown\n      inNav\n      className=\"c-header-nav-items mx-2\"\n      direction=\"down\"\n    >\n      <div className='d-flex align-items-center'>\n        {loginInfo.isRegistered\n          && <CDropdownToggle className=\"c-header-nav-link\" caret={false}>\n            <div className=\"c-avatar\">\n              <CImg\n                src={process.env.PUBLIC_URL + '/avatars/default.jpg'}\n                className=\"c-avatar-img\"\n                alt=\"\"\n              />\n            </div>\n          </CDropdownToggle>}\n        <Auth />\n      </div>\n      <CDropdownMenu className=\"pt-0\" placement=\"bottom-end\">\n        <CDropdownItem\n          header\n          tag=\"div\"\n          color=\"light\"\n          className=\"text-center\"\n        >\n          <strong>Settings</strong>\n        </CDropdownItem>\n        <CDropdownItem>\n          <CIcon name=\"cil-user\" className=\"mfe-2\" />Profile\n        </CDropdownItem>\n        <CDropdownItem divider />\n        <CDropdownItem>\n          <CIcon name=\"cil-lock-locked\" className=\"mfe-2\" />\n          Lock Account\n        </CDropdownItem>\n      </CDropdownMenu>\n    </CDropdown >\n  )\n}\n\nexport default TheHeaderDropdown\n","import CIcon from '@coreui/icons-react'\n\nconst _nav = [\n  {\n    _tag: 'CSidebarNavItem',\n    name: 'Dashboard',\n    to: '/dashboard',\n    icon: <CIcon name=\"cil-speedometer\" customClasses=\"c-sidebar-nav-icon\" />,\n    badge: {\n      color: 'info',\n      text: '',\n    }\n  },\n  {\n    _tag: 'CSidebarNavDropdown',\n    name: 'Dances',\n    route: '/dances',\n    icon: 'cil-puzzle',\n    _children: [\n      {\n        _tag: 'CSidebarNavItem',\n        name: 'Videos',\n        to: '/dances/videos',\n      },\n    ]\n  }\n]\n\nexport default _nav\n","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  CCreateElement,\n  CSidebar,\n  CSidebarBrand,\n  CSidebarNav,\n  CSidebarNavDivider,\n  CSidebarNavTitle,\n  CSidebarMinimizer,\n  CSidebarNavDropdown,\n  CSidebarNavItem,\n} from '@coreui/react'\n\n// sidebar nav config\nimport navigation from './_nav'\nimport { siderbarShowSlice } from 'src/redux/store'\n\nconst TheSidebar = () => {\n  const dispatch = useDispatch();\n\n  const { toggle } = siderbarShowSlice.actions;\n  const show = useSelector(state => state.sidebarShow);\n\n  return (\n    <CSidebar\n      show={show}\n      onShowChange={() => dispatch(toggle())}\n    >\n      <CSidebarBrand className=\"d-md-down-none\" to=\"/\">\n        <div>\n          Homepage\n        </div>\n      </CSidebarBrand>\n      <CSidebarNav>\n        <CCreateElement\n          items={navigation}\n          components={{\n            CSidebarNavDivider,\n            CSidebarNavDropdown,\n            CSidebarNavItem,\n            CSidebarNavTitle\n          }}\n        />\n      </CSidebarNav>\n      <CSidebarMinimizer className=\"c-d-md-down-none\" />\n    </CSidebar>\n  )\n}\n\nexport default React.memo(TheSidebar)\n","import React from 'react'\nimport {\n  TheContent,\n  TheSidebar,\n  TheFooter,\n  TheHeader\n} from './index'\n\nconst TheLayout = () => {\n\n  return (\n    <div className=\"c-app c-default-layout\">\n      <TheSidebar/>\n      <div className=\"c-wrapper\">\n        <TheHeader/>\n        <div className=\"c-body\">\n          <TheContent/>\n        </div>\n        <TheFooter/>\n      </div>\n    </div>\n  )\n}\n\nexport default TheLayout\n"],"sourceRoot":""}